# 加权搜索功能使用指南

## 概述

我们已经成功为你的搜索组件添加了加权搜索功能！现在用户可以根据不同的主题维度来调整搜索偏好，获得更精准的匹配结果。

## 新增功能

### 1. 搜索模式切换
- 在文案输入框下方，用户可以看到一个"启用加权搜索"的复选框
- 勾选后可以启用新的加权搜索模式
- 默认使用传统搜索模式

### 2. 权重控制面板
当启用加权搜索后，点击"权重设置"按钮可以展开详细的权重配置界面：

#### 快速预设模板
- **均衡搜索**: 所有维度平等权重
- **教育导向**: 重点关注教育价值和学习策略  
- **创意导向**: 重点关注创意和游戏化元素
- **流程导向**: 重点关注具体行动和过程
- **社交导向**: 重点关注人际关系和角色
- **视觉导向**: 重点关注视觉效果和场景

#### 七个主题维度滑块
每个滑块都可以在0-100%之间调整：

1. 🧠 **核心哲理与人生主题** - 关注深层的人生哲理和价值观
2. 🚀 **行动过程与成长** - 关注具体的行为过程和成长轨迹  
3. 👥 **人际角色与情感连接** - 关注人际关系和情感表达
4. 📚 **阅读教育价值** - 关注教育意义和知识传递
5. 💡 **阅读学习策略** - 关注学习方法和策略
6. 🎨 **创意玩法与想象力** - 关注创造力和想象力发挥
7. 🌅 **场景氛围与视觉元素** - 关注视觉效果和场景设置

### 3. 增强的搜索结果显示
- 加权搜索结果会显示"综合得分"而不是"匹配度"
- 结果卡片会标注"加权搜索"标签
- 显示各个主题维度的匹配情况
- 展示当前权重设置对结果的影响

## 技术实现

### 新增的状态管理
```typescript
// 加权搜索相关状态
const [useWeightedSearch, setUseWeightedSearch] = useState(false);
const [weightedResults, setWeightedResults] = useState<WeightedSearchResult[]>([]);
const [searchWeights, setSearchWeights] = useState<SearchWeights>(WEIGHT_PRESETS.balanced);
const [showWeightSettings, setShowWeightSettings] = useState(false);
const [selectedPreset, setSelectedPreset] = useState<keyof typeof WEIGHT_PRESETS>('balanced');
```

### 核心搜索逻辑
- 传统搜索：使用 `matchIllustrationsToText()` 函数
- 加权搜索：使用 `performWeightedSearch()` 函数，支持自定义权重配置

### API集成
- 调用 `vectorizeText()` 将文案转换为向量
- 调用 `performWeightedSearch()` 执行加权搜索
- 支持预设模板和自定义权重配置

## 用户体验优化

### 视觉设计
- 遵循Apple风格的简约设计
- 使用渐变色滑块提供直观的权重调整体验
- 权重设置区域使用蓝色主题，与搜索功能呼应
- 加权搜索结果使用紫色标识，便于区分

### 交互体验
- 权重设置面板可折叠，避免界面过于复杂
- 实时显示权重总和，提供归一化提示
- 预设模板一键切换，方便快速调整
- 滑块支持精确的百分比调整

## 使用建议

1. **首次使用**: 建议从预设模板开始，了解不同权重配置的效果
2. **精细调优**: 根据具体需求手动调整各维度权重
3. **结果对比**: 可以在传统搜索和加权搜索间切换，对比效果差异
4. **权重平衡**: 注意权重分配的合理性，避免某个维度权重过高

## 后续扩展

这个加权搜索功能为未来的扩展奠定了基础：
- 可以添加更多预设模板
- 支持保存用户自定义的权重配置
- 可以基于搜索历史智能推荐权重设置
- 支持A/B测试不同权重配置的效果